<a href='D:\Code_Projects\RequirementAnalyzer\RequirementAnalyzer.App\Output\Index.html'>Home</a><h1>SYR_CHAOJI-1_02</h1></br><li>1.1.32.2 SYR_CHAOJI-1_02 : provide functionality in SW for handling Short Message Reception</br></li><li>1.1.32.2.1 Description</br></li><li>1.1.32.2.1.0-1 Brief description: 
Supplier-SW shall trigger the ACK when SM_RM message is received from Charger during Charging Communication.

Supplier-SW shall receive the URM messages periodically from Charger and data/Payload shall be passed to BMW APPl. </br></li><li>1.1.32.2.1.0-2 Preconditions: Vehicle is coded as Chaoji vehicle (VehChrTypDC = 4).  BMW_nr_DcCanProtReq is set to 2 (Chaoji vehicle charges at chaoji-1 charger).</br></li><li>1.1.32.2.1.0-3 Trigger: Vehicle (CCU) receives the SM_RM frame over DC-CAN.</br></li><li>1.1.32.2.1.0-4 Input data: 

******
(change for new draft CDV2)
https://ccu-svn.microfuzzy.com/CCU_G26/SP21/SP21_SOP_2207/ENG.02_SystemRequirementsAnalysis/ENG.02_SystemRequirementSpecification/AdditionalDocuments/Charging_Interface/ChaoJi-1/CCU-31198
new DBC in sprint.2219
https://asc-prod-ha-wig.bmw.com/svn/asc271/Projects/CCUP_BEV21/branches/CCUBEV21_2219/BMW/Doc/NK/PATCH_v1_EADBN-1710_220324_DBC_EAPC_DC_CAN.dbc

Note: new DBC is integrated in SW. 
In accordance with new draft CDV2, there is change in values of CAN identifiers of all messages.
a) change in CAN addresses for charger and CCU
b) change in PDU format (PF) values for all message types

*******</br></li><li>1.1.32.2.1.0-5 Description of behaviour:
During Chaoji-1 charging sequence, in function module, vehicle (CCU) is expected to receive SM_RM message from charger.
In accordance with new Chaoji draft CDV2.
Function Module	Contents of Parameter Group	Parameter Group Identification (PGI) (hex)	Message type	Message content (short)
Public Message "Phase Acknowledgment"	Phase information message	0x01	SM_RM	CPA
	Vehicle phase acknowledgment message	0x02	SM_RM	VPA
“Suspension” message	“Charger Suspension” message	0x03	SM_RM	CSU
	“Vehicle Suspension” message	0x04	SM_RM	VSU
Public Message “End Message”	Charger end message	0x03	SM_RM	CEN
	Vehicle end message	0x04	SM_RM	VEN
Public Message “Contact Status Message”	Charger output contact status message	0x05	SM_RM	CCO
	Vehicle charging contact status message	0x06	SM_RM	VCO
End Of Charging	Charger statistic message (FDC=1)	0x81	SM_RM	CSM
	Vehicle statistic message (FDC=1)	0x82	SM_RM	VSM
Charging system self-check	“Charger Self-check Information” message (FDC=1)
Charger self-check status message (FDC=1)	0x51	SM_URM	CSI CSS
	“Vehicle Self-check Information” message (FDC=1)
Charger self-check result message (FDC=1)	0x52	SM_URM
SM_RM	VSI CSR
Pre charge and Energy Transmission	“Charger Ready State” message (FDC=1)	0x71	SM_URM	CRS
	“Vehicle Ready Status” message (FDC=1)	0x72	SM_URM	VRS
	“Vehicle Charging Demand” message (FDC=1)	0x73	SM_URM	VCD
	“Basic Information of Vehicle Charging” message (FDC=1)	0x74	SM_URM	VCI
	“Charger Dynamic Output Capacity” message (FDC=1)	0x75	SM_URM
SM_RM	CDO

URM RX frame in accordance with chaoji CDV2.
Function Module	Contents of Parameter Group	Parameter Group Identification (PGI) (hex)	Message type	Message content (short)
Self-check of Charging System	“Charger Self-check Information” message (FDC=1)
Charger self-check status message (FDC=1)	0x51	SM_URM	CSI CSS
	“Vehicle Self-check Information” message (FDC=1)
Charger self-check result message (FDC=1)	0x52	SM_URM
SM_RM	VSI CSR
Pre charge and Energy Transmission	“Charger Ready State” message (FDC=1)	0x71	SM_URM	CRS
	“Vehicle Ready Status” message (FDC=1)	0x72	SM_URM	VRS
	“Vehicle Charging Demand” message (FDC=1)	0x73	SM_URM	VCD
	“Basic Information of Vehicle Charging” message (FDC=1)	0x74	SM_URM	VCI
	“Charger Dynamic Output Capacity” message (FDC=1)	0x75	SM_URM
SM_RM	CDO

When SM RM or URM frame is received by vehicle (CCU), RX-PDU is sent from CAN IF to upper layers (COM). RX-signals are received by LIM-C from ComAdapter via RTE interface. 

Supplier-SW shall monitor the reception of SM RM frame (at RTE level) and shall trigger the ACK for respective SM RM frame.
ACK format from CDV2 standard:
 
Retry from Charger for SM RM.
If same SM RM frame (same PGI) is received again on DC-CAN bus, LIM-C shall again receives RX-signals via COMAdapter and Supplier-SW shall re-send the ACK. No additional handling is done at Supplier-SW.</br></li><li>1.1.32.2.1.0-6 Timing Requirements: 
Cycle time for for both SM_URM RX messages (CRS, CSS) is 250 ms as per new CDV2 draft.  </br></li><li>1.1.32.2.1.0-7 Output data: RX-signal interfaces shall be updated and ACK shall be present on DC-CAN bus.</br></li><li>1.1.32.2.1.0-8 Postconditions: NA		</br></li><li>1.1.32.2.1.0-9 Descriptions of exceptions:
SM_URM cycle time is 250 ms, however standard is not specifying the tolerance for the deviation on the cycle time (for example : +-10%).</br></li><li>1.1.32.2.1.0-10 Dependencies and interactions: Supplier-SW (Chaoji-Adaptor), RTE, COM, CAN IF, PduR, BSWM</br></li><li>1.1.32.2.2 Differences to CRS</br></li><li>1.1.32.2.2.0-1 xxx</br></li><li>1.1.32.2.3 Questions and Answers</br></li><li>1.1.32.2.3.0-1 xxx</br></li>