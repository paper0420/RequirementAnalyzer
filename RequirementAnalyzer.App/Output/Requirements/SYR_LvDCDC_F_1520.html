<a href='D:\Code_Projects\RequirementAnalyzer\RequirementAnalyzer.App\Output\Index.html'>Home</a><h1>SYR_LvDCDC_F_1520</h1></br><li>6.1.94 SYR_LvDCDC_F_1520: EOL Calibration</br></li><li>6.1.94.1 Description</br></li><li>6.1.94.1.0-1 [Short Description] In order to fulfill the KLH Specifications in terms of DCDC Output Current (see in the section [Traceability to Requirement] the corresponding KLH IDs) 
and guarantee at the same time the integrity of DCDC HW and, in particular, of the secondary MOSFET on the DCDC Board, an offset calibration of the CC-Command has been designed.
The purpose of this procedure, also known as "EOL Calibration", is to correct the inaccuracy of the CC command. 
The EOL Calibration will take place at PASCZ and it will consist in calculating the difference , given a coolant temperature of 70Â°C, between a CC value of 265A and the 
effective corresponding DCDC Output current. This value will be then written in a specific NVM Block.
This offset can be called "DIFF" and it is interfaced by the Rte variable Rte_Pim_Precision_Calib_1_nv. 
Accordingly with the value of Rte_Pim_Precision_Calib_1_nv, it can be distinguished between NON CALIBRATED UNITS and CALIBRATED UNITS as follows:

NON CALIBRATED UNITS ===> Rte_Pim_Precision_Calib_1_nv.MSW != 0xAA55 (Key Code)
CALIBRATED UNITS      ===> Rte_Pim_Precision_Calib_1_nv.MSW == 0xAA55  (Key Code)
						   Rte_Pim_Precision_Calib_1_nv.LSW == DIFF

  
a) NON CALIBRATED UNITS
If the EOL Calibration is not present or an NVM issue occurs, following set of variables will be relevant for the DCDC Output Current
Factor_DCDC_WJ_Derating_Point_Peak = {0, 10000, 10000, 9120, 8339, 0}
Factor_DCDC_WJ_Derating_Point_Continous = {0, 10000, 10000, 9566,7598, 0}
Thresh_WJtemp_Derating_Point_SEV_Active = {-50, 55, 60, 65, 70, 100, 150, 200} 
Factor_WJtemp_Derating_Point_SEV_Active = {10000, 10000, 9470, 9356, 8939, 8939, 8939, 8939}
g_Calib_Factor_WJtemp_Derating_Point_SEV_Active_LT = {10000, 10000, 10000, 10000, 8939, 8939, 8939, 8939}
Size_WJtemp_Derating_Point_SEV_Active = 6

The calculation of the max. value of the Peak/Ext Peak current will be as follows: 

I_Peak(100%) = g_dcdcrlt_available_current (Tcoolant < 35Â°C) when DCDC in Peak Mode = p_DCDC_PEAK_I_LV= 3070 (307A)
I_Continuous (100%) = g_dcdcrlt_available_current (Tcoolant < 35Â°C) when DCDC in Continuous Mode = p_DCDC_CONTINUOUS_I_LV_I_LV= 2610 (261A)
I_ExtPeak(100%) = DCDC_ExPEAK_I_LV_min= 2640 (264A)

As usual, given T = Coolant Temperature:

1a) I_Peak(T) =  I_Peak(100%) * Factor_DCDC_WJ_Derating_Point_Peak;
2a) I_Continuous (T) = I_Continuous(100%) * Factor_DCDC_WJ_Derating_Point_Continuous;
3a) I_ExtPeak (T) = I_ExtPeak(100%)* Factor_WJtemp_Derating_Point_SEV_Active

I.e., as an example for the Peak and Continuous current, this implies following values of g_dcdcrlt_available_current depending on the coolant temperature:

Coolant Temp: -38.8degC ==> g_dcdcrlt_available_current = 0 for Peak/Continuous Mode
Coolant Temp: -25.0degC ==> g_dcdcrlt_available_current = 3070 (307A) for Peak Mode
						==> g_dcdcrlt_available_current = 2610 (261A) for Continuous Mode
Coolant Temp:  35.0degC ==> g_dcdcrlt_available_current = 3070 (307A) for Peak Mode
						==> g_dcdcrlt_available_current = 2610 (261A) for Continuous Mode
Coolant Temp:  45.0degC ==> g_dcdcrlt_available_current = 2800 (280A) for Peak Mode
						==> g_dcdcrlt_available_current = 2494 (249.4A) for Continuous Mode
Coolant Temp:  70.0degC ==> g_dcdcrlt_available_current = 2650 (265A) for Peak Mode
						==> g_dcdcrlt_available_current = 1881 (188.1A) for Continuous Mode
Coolant Temp:  77.6degC ==> g_dcdcrlt_available_current = 0 for Peak/Continuous Mode


b) CALIBRATED UNITS
if the EOL Calibration is present and correctly working, following set of variables has to be considered for the DCDC Output Current
Factor_DCDC_WJ_Derating_Point_Peak_HT = {0, 10000, 10000, 9620, 9137, 0}
Factor_DCDC_WJ_Derating_Point_Continous_HT = {0, 10000, 10000, 9566,7598, 0}
Thresh_WJtemp_Derating_Point_SEV_Active_HT = {-50, 55, 60, 62, 63, 65, 150, 200}  
Factor_WJtemp_Derating_Point_SEV_Active_HT = {10000, 10000, 10000, 10000, 9608, 9216, 9216, 9216}
g_Calib_Factor_WJtemp_Derating_Point_SEV_Active_LT_HT = {10000, 10000, 10000, 10000, 10000, 9216, 9216, 9216}
Size_WJtemp_Derating_Point_SEV_Active_HT = 7
p_DCDC_PEAK_I_LV_HT = 2650 (265A)
p_DCDC_PEAK_I_LV_HT_Factor = 9137 (0.9137%)
p_DCDC_EXT_PEAK_I_LV_HT_Factor= 9433 (0.9433%)Â Â  Â 

The calculation of the max. value of the Peak/Ext Peak current will be as follows: 

1b) I_Peak(100%) = g_dcdcrlt_available_current (Tcoolant < 35Â°C) when DCDC in Peak Mode = (p_DCDC_PEAK_I_LV_HT + DIFF) / p_DCDC_PEAK_I_LV_HT_Factor   
2b) I_Continuous (100%) = g_dcdcrlt_available_current (Tcoolant < 35Â°C) when DCDC in Continuous Mode = p_DCDC_CONTINUOUS_I_LV_I_LV= 2610 (261A)
3b) I_ExtPeak(100%) = (p_DCDC_PEAK_I_LV_HT + DIFF) * p_DCDC_EXT_PEAK_I_LV_HT_Factor


Apart of the above mentioned behaviour for calibrated/non calibrated units, following condition has been implemented

c) in case DCDC is in Peak Mode g_dcdcrlt_derating_status.Bit14 =  1 

If { counter_peak > 0 AND coolant_temp > Thresh_WJ_Det_Peak AND U_LvDCDC < Thresh_OutVolt_Det_Peak } then g_dcdcrlt_derating_status.Bit14 = 1 16s long

Debouncing time for the above condition: Deb_Time_Bit14_Peak = 100ms

Healing condition (Bit14 1 ---> 0) : after the elapsing of the 16s 

Calibration values:
Thresh_WJ_Det_Peak = 70 (70Â°C)
Thresh_OutVolt_Det_Peak = 120 (12V)
Deb_Time_Bit14_Peak = 100 (100ms)</br></li><li>6.1.94.1.0-2 --</br></li><li>6.1.94.1.0-3 [Preconditions] CCU is up and Running ; DCDC HW has no defect</br></li><li>6.1.94.1.0-4  [Trigger] The trigger for the above mentioned mechanism is given by the CCU Wake Up ===> no special external trigger will be required </br></li><li>6.1.94.1.0-5  [Input Data]  
Rte_Pim_Precision_Calib_1_nv (for determination of the calibration offset)
DCDC Output Current (g_dcdcrlt_dcdc_lv_current_phy_value)
coolant temperature (g_dcdcrlt_dcdc_coolanttemp_phy_value)
DCDC available current (g_dcdcrlt_available_current)</br></li><li>6.1.94.1.0-6 [Enterprise Architect Functional Model]

n.a.</br></li><li>6.1.94.1.0-7 --</br></li><li>6.1.94.1.0-8 [Timing requirements] no specific timing requirements</br></li><li>6.1.94.1.0-9 ..</br></li><li>6.1.94.1.0-10  [post conditions]   from following point of views

DCDC Operating state
CCU System State
there will no postcondition, in terms of change of the state mentioned above in the Preconditions.

The only from System Point of view relevant change is the value of the DCDC output current accordingly with the EOL Calibration status.

This will change accordingly with the values/boundary conditions mentioned in the above section "Description"</br></li><li>6.1.94.1.0-11 ..</br></li><li>6.1.94.1.0-12  [Output Data] 

g_dcdcrlt_available_current</br></li><li>6.1.94.1.0-13 [Dependencies and Interactions] The SWCs which are involved in this functionality are:

DCDC (JP-Appl)
IoHwAb for the detection of the cooling temperature
NvM</br></li><li>6.1.94.1.0-14 [Verification Measure] SYQT (System Qualification Test)</br></li><li>6.1.94.1.0-15  [Verification Criteria]  The  verification of this criteria has to be focused on the check of the conditions a), b) , c) and of all the possible transition undercases
1a),2a), 3a), 1b), 2b), 3b) (see Peak Continuous state machine in the document "BMW03_V15107A_Calibration_document_for_DCDC" ) mentioned in the above section "Short Description"</br></li><li>6.1.94.1.0-16 [Traceability to Requirement]
<ReqID>9801;9803;9804;9805;14130;14131</ReqID></br></li><li>6.1.94.1.0-16.0-1 [Estimate] 3days [acceptance criteria] modelling Jira-Ticket set to "resolved"</br></li><li>6.1.94.2 Differences to CRS</br></li><li>6.1.94.2.0-1 xxx</br></li><li>6.1.94.3 Questions and Answers</br></li><li>6.1.94.3.0-1 xxx</br></li>