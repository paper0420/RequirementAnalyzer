<a href='D:\Code_Projects\RequirementAnalyzer\RequirementAnalyzer.App\Output\Index.html'>Home</a><h1>SYR_CCS_609</h1></br><li>1.1.31.23 SYR_CCS_609: Read all Certificate Status via Diagnostic Routine</br></li><li>1.1.31.23.1 Description</br></li><li>1.1.31.23.1.0-1 Brief description:
For Plug-and-Charge, each CCU will store V2G root certificates (max. 5) and Contract certificates with each having associated private keys (max. 4). 
Tester can trigger sammel status job to read information on all stored certificates in CCU.</br></li><li>1.1.31.23.1.0-2 Preconditions: 
Sessions - DEFAULT_SESSION APP, EXTENDED_DIAGNOSTIC_SESSION APP
Secure ECU Mode - Engineering, Field or Plant</br></li><li>1.1.31.23.1.0-3 Trigger: 
Diagnostic Routine is executed for deletion: "STATUS_PNC_SAMMELSTATUS_ZERTIFIKATE 0x22 0x78C7"</br></li><li>1.1.31.23.1.0-4 Input data: Diagnostic Routine Request (Zedis v30 integration)</br></li><li>1.1.31.23.1.0-5 Description of behaviour:
CCU SW shall maintain internal variable states/look-up on required status data which shall be accessible while preparing response for read job. Internal states/look-up shall be updatable during runtime. 

Internal states/Look-up for response buffer:
1. whether the plug and charge is activated (i.e. authorization req-resp is successful) or not
2. whether Contract cert installation via PLC is requested or not 
3. slot selection during V2G session.
4. certificate related information (such as EMAID or fingerprint, error status, validity, slot number or slot status etc.) for all stored certificates.
5. For empty slots, init values shall be applied to certain fields (remaining validity of certificate set to 255, error counter to 0, validity of certificate to 0, status slot to 0). 

Attributes mapping:

Note: For atrribute AUTO_ZERTIFIKATSAUSWAHL: It shows if Automatic certificate selection from MGU was requested  or not. if SelectContractCertificatePlugAndCharge signal = 0 then AUTO_ZERTIFIKATSAUSWAHL shall be 1 (Active) otherwise AUTO_ZERTIFIKATSAUSWAHL shall be 0 (Inactive).

 
*****
Update wrt ERR#97482
In sammel status diag job, two parameters are added in ZEDISv33 onwards.
For each root certificate stored in CCU, length of finger print is added as new parameter. For each Contract certificate stored in CCU, EMAID length is added as new parameter.
Also, data type of fingerprint value is changed from String[32] to Data[32].

 
 
refer:
https://ccu-svn.microfuzzy.com/CCU_G26/SP21/SP21_SOP_2207/ENG.02_SystemRequirementsAnalysis/ENG.02_SystemRequirementSpecification/AdditionalDocuments/Charging_Interface/CCS/PnC/MF_Concept_Plug&Charge_CCU-31907_CCU-30877.pptx
*****

When the startRoutine is executed and accepted, CCU SW shall provide response back as "positive" for successful read certicate status (i.e. complete response data buffer is available) or "negative" for unsuccessful read certicate status (i.e. failure) to tester/MGU. </br></li><li>1.1.31.23.1.0-6 Timing Requirements: NA</br></li><li>1.1.31.23.1.0-7 Output data: 
Read Job response shall be available.</br></li><li>1.1.31.23.1.0-8 Postconditions: NA</br></li><li>1.1.31.23.1.0-9 Descriptions of exceptions: 
"CONTRACT_GUELTIGKEIT_SLOT_1":
Since remaining validity calc. cannot be done correctly due to vector SW limitation. Handling with proper format and value shall be out of scope in 2145.</br></li><li>1.1.31.23.1.0-10 Dependencies and interactions:
vSCC, SCCAdaptor, Diag, Diag App, NVM</br></li><li>1.1.31.23.2 Differences to CRS</br></li><li>1.1.31.23.2.0-1 NA</br></li><li>1.1.31.23.3 Questions and Answers</br></li><li>1.1.31.23.3.0-1 NA</br></li>