<a href='D:\Code_Projects\RequirementAnalyzer\RequirementAnalyzer.App\Output\Index.html'>Home</a><h1>SYR_DIA_280</h1></br><li>7.5.1.28 SYR_DIA_280: Dignostic Job -  0xAE90 - PRODUCTION_RESTORE_VALUE</br></li><li>7.5.1.28.1 Description</br></li><li>7.5.1.28.1.0-1 Brief description: It should be possible for BMW Plant to reset all stored NvM data to default value, which can be changed during CCU runtime (not via external trigger).</br></li><li>7.5.1.28.1.0-2 Preconditions: 
- CCU should have valid EOL production data in NvM (SN, ECU UID, Production date, Pr√ºfstempel, MAC Adresses 1, 2 and 3 ...)
- Plant Mode or Engineering Mode should be set
- Montage_Modus (Assembly Mode) should be set 
- SFA Tokens 01D1A or 01D1B should be set.
- CCU should be flashed and coded.
- SecOc Certificates Key Packs should be installed (valid only for SP21) 
- CCU should run in Test Environment for some time </br></li><li>7.5.1.28.1.0-3 Trigger: 
Trigger Diagnostic Job DID 0xAE90 STEUERN_PRODUCTION_RESTORE_VALUE from Tester
Trigger Service Request (start control routine) --> 31 01 AE 90</br></li><li>7.5.1.28.1.0-4 Input data: status of stored NvM data before Trigger of DID 0xAE90 from Tester </br></li><li>7.5.1.28.1.0-5 Description of behaviour: 

Start Control routine 31 01 AE 90 will either erase (reset to default values) or maintain stored data in respective NvM Blocks as below:

SP21:

- For all SW Versions from SW 2107.0 (SP21)
--> Diag Job 0xAE90 will maintain Panasonic EOL production data and Montage Modus (Assembly Mode) in below NvM Blocks:

NvM Blocks	For all SW Versions from SW 2107.0 (SP21) 
NVM_BLOCK_SERIALNUMBER	Exclude from Job
NVM_BLOCK_SECURITY_ACTIVATE	Exclude from Job
NVM_BLOCK_PRODUCTION_DATE	Exclude from Job
NVM_BLOCK_PANA_RES	Exclude from Job
NVM_BLOCK_OPERATION_TIME	Exclude from Job
NVM_BLOCK_MAC_3_OTP	Exclude from Job
NVM_BLOCK_MAC_2_OTP	Exclude from Job
NVM_BLOCK_MAC_1_OTP	Exclude from Job
NVM_BLOCK_INT_HW_VERSION	Exclude from Job
NVM_BLOCK_ENERGY_COUNTER	Exclude from Job
NVM_BLOCK_ECUUID	Exclude from Job
NVM_BLOCK_ECUCONF_MONMODUS	Exclude from Job


- From SW 2107.0 (SP21) until SW 2221.0 (SP21)
--> Coding data, SFA Tokens and SecOc cert kepacks will get lost after trigger of DID 0xAE90 
- From SW 2223.0 (SP21)
--> Coding data, SFA Tokens and SecOc cert kepacks will be maintaned after trigger of DID 0xAE90 

NvM Blocks	From SW 2107.0 (SP21) until SW 2221.0 (SP21)	From SW 2223.0 (SP21)
CodingDependencyNVM	Include in Job	Exclude from Job
NVM_BLOCK_Crypto_key_30_9	Include in Job	Exclude from Job
NVM_BLOCK_Crypto_key_30_1	Include in Job	Exclude from Job
NVM_BLOCK_Crypto_key_29_0	Include in Job	Exclude from Job
NVM_BLOCK_Crypto_key_28_0	Include in Job	Exclude from Job
BsNvMSfaData_0	Include in Job	Exclude from Job
BsNvMSecEcuMode	Include in Job	Exclude from Job
BsNvMCertState	Include in Job	Exclude from Job
Bs_KeyListSignature	Include in Job	Exclude from Job
BsNvMSfaData_1	Include in Job	Exclude from Job
BsNvMSfaData_2	Include in Job	Exclude from Job

The detailed Implementation Sheet of DID 0xAE90 with all NvM Blocks and SW Versions dependency is stored in below SVN Link: 

SP21 SOP2307:
https://ccu-svn.microfuzzy.com/CCU_G26/SP21/SP21_SOP_2307/ENG.04_SoftwareRequirementsAnalysis/BSW/EE/AdditionalDocuments/Diagnostic job 0xAE90 - PRODUCTION_RESTORE_VALUE/NvM_BlockList_Diag_Job_0xAE90.xls

SP18:

- For all SW Versions until SW 2041.300 (SP18)
--> Diag Job 0xAE90 will maintain Panasonic EOL production data and erase Montage Modus (Assembly Mode) in below NvM Blocks:

NvM Blocks	For all SW Versions until SW 2041.300 (SP18)
NVM_BLOCK_SERIALNUMBER	Exclude from Job
NVM_BLOCK_SECURITY_ACTIVATE	Exclude from Job
NVM_BLOCK_PRODUCTION_DATE	Exclude from Job
NVM_BLOCK_PANA_RES	Exclude from Job
NVM_BLOCK_OPERATION_TIME	Exclude from Job
NVM_BLOCK_MAC_3_OTP	Exclude from Job
NVM_BLOCK_MAC_2_OTP	Exclude from Job
NVM_BLOCK_MAC_1_OTP	Exclude from Job
NVM_BLOCK_INT_HW_VERSION	Exclude from Job
NVM_BLOCK_ENERGY_COUNTER	Exclude from Job
NVM_BLOCK_ECUUID	Exclude from Job
NVM_BLOCK_ECUCONF_MONMODUS	Include in Job 


- From SW 2041.310 (SP18)
--> Coding data, SFA Tokens and SecOc cert kepacks and Montage Modus will be maintaned after trigger of DID 0xAE90 

NvM Blocks	For all SW Versions until SW 2041.300 (SP18)	From SW 2041.310 (SP18)
CodingDependencyNVM	Include in Job	Exclude from Job
NVM_BLOCK_Crypto_key_30_9	Exclude from Job	Exclude from Job
NVM_BLOCK_Crypto_key_30_1	Exclude from Job	Exclude from Job
NVM_BLOCK_Crypto_key_29_0	Exclude from Job	Exclude from Job
NVM_BLOCK_Crypto_key_28_0	Exclude from Job	Exclude from Job
BsNvMSfaData_0	Include in Job	Exclude from Job
BsNvMSecEcuMode	Include in Job	Exclude from Job
BsNvMCertState	Exclude from Job	Exclude from Job
Bs_KeyListSignature	Exclude from Job	Exclude from Job
BsNvMSfaData_1	Exclude from Job	Exclude from Job
BsNvMSfaData_2	Exclude from Job	Exclude from Job
NVM_BLOCK_ECUCONF_MONMODUS	Include in Job	Exclude from Job

The detailed Implementation Sheet of DID 0xAE90 with all NvM Blocks and SW Versions dependency is stored in below SVN Link: 

SP18 SOP2307:
https://ccu-svn.microfuzzy.com/CCU_G26/SP18/SP18_SOP_2307/ENG.04_SoftwareRequirementsAnalysis/BSW/EE/AdditionalDocuments/Diagnostic job 0xAE90 - PRODUCTION_RESTORE_VALUE/NvM_BlockList_Diag_Job_0xAE90.xls

 
</br></li><li>7.5.1.28.1.0-6 Timing Requirements: none</br></li><li>7.5.1.28.1.0-7 Output data: Positive Diagnostic reponse on service Request 31 01 AE 90</br></li><li>7.5.1.28.1.0-8 Postconditions: as per the Implmentation sheet in above SVN Link: 
NvM Blocks, which are included in Job, should be reset to default values
NvM Blocks, which are excluded from Job, should have same stored input NvM data before triggering the Job.</br></li><li>7.5.1.28.1.0-9 Descriptions of exceptions:

1. CDC NvM Block is not applicable for SP18 --> Tesing is not possible
2. SecOc Certificate installation is not possible in SP18 --> ENG10 EE System Testing is not possible 
</br></li><li>7.5.1.28.1.0-10 Dependencies and interactions: none</br></li><li>7.5.1.28.2 Differences to CRS</br></li><li>7.5.1.28.2.0-1 
[CR-1110][CCU-31827]change of diagnostic job 0xAE90 to not delete the coding 
--> is implmeneted in SP21 in Meta.2225 from SW 2223.0

[CR-1386] [CCU-32935] [NOGO] change of diagnostic job 0xAE90 to avoid loss the coding data - SP18 CLONE 
--> is implemented in SP18 in Meta2041 from SW 2041.310
</br></li><li>7.5.1.28.3 Questions and Answers</br></li><li>7.5.1.28.3.0-1 none</br></li>