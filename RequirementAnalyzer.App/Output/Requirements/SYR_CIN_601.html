<a href='D:\Code_Projects\RequirementAnalyzer\RequirementAnalyzer.App\Output\Index.html'>Home</a><h1>SYR_CIN_601</h1></br><li>8.1.58 SYR_CIN_601: Provide functionality to enable Ethernet Bus and Grauitous ARP in Production Diagnostics and Smart Charging scenarios</br></li><li>8.1.58.1 Description</br></li><li>8.1.58.1.0-1 Brief description:
ETH bus (link-up/port config) are required to be done for  Production (Running ETH diagnostic jobs) and Smart Charging (send Charging Profile to MGU).
To control the start-up and shutdown of ETH in Production Diagnostics, BMW has provided new interface. Also, it is required to seperately control the start-up and shutdown of SOME/IP SD using existing BMW interface. ETH MAC address handling and ETH frame priority setting are required to be done.</br></li><li>8.1.58.1.0-2 Preconditions: 
1) For Enabling/Disabling ETH via BMW interface, CCU must be running and LAN is connected
2) For Gratuitous ARP transmission, ETH bus should be up.
3) For VLAN priority setting, SoAd must be  configured.
4) MAC address is written in NVM block by diagnostic job.</br></li><li>8.1.58.1.0-3 Trigger: BMW interface(BMW_b_NetComAcvn interface) shall bring up or down the ETH for diagnostic jobs.
Another BMW interface (BMW_b_SomeIPNetProtOnOff) shall bring up or down SOME/IP services.</br></li><li>8.1.58.1.0-4 Input data: NA</br></li><li>8.1.58.1.0-5 Description of behaviour:
Enable (start-up) or disable (shutdown) the ETH bus shall be done based on BMW_b_NetComAcvn interface value in production diagnostic use case.

SOME/IP SD servies shall be set to enable (active)or disable (shutdown) based on BMW_b_SomeIPNetProtOnOff interface.  

Gratuitous ARP message shall be sent out once when BMW_b_NetComAcvn or BMWhvcha_s_b_SomeIPNetProtOnOff_C is enabled.

Seperation of interfaces in Smart Charging (SOME/IP) sequence flow is depicted in below file:
https://svn-bmw03-pais.eu.panasonic.com/BMW03_CCU_DOC/Common/WorkSpace/ENG.02_SystemRequirementsAnalysis/ENG.02_SystemRequirementSpecification/AdditionalDocuments/Charging_Interface/CCS/Sequence/LH_SOME_IP_CCU_13462_CCU_16475.pdf

Calibratable switches to control interfaces as follows:
BMWhvcha_s_b_NetComAcvn_C
BMWhvcha_s_b_SomeIPNetProtOnOff_C

VLAN priority (7) shall be set via SoAd module. 
Refer: 
LH Specification: https://svn-bmw03-pais.eu.panasonic.com/BMW03_CCU_DOC/Common/WorkSpace/ENG.01_RequirementsElicitation/ENG.01_CustomerRequirementSpecificationOrginal/ReferenceDocuments/02_Development/01_GENERAL/01_LH/_EE_LH_SP2021/07 Kommunikationstechnologien/20160915_LH_10216504-6_Eth-Config.pdf 

When ETH MAC is read from NVM and if value of MAC is not valid value (i.e. set by production diagnostic job) then ETH link shall not be up and running
For example, if MAC address is 00 or FF then ETH communication shall fail if ETH is valid MAC then only communication is possible.</br></li><li>8.1.58.1.0-6 Timing Requirements: Gratuitous ARP message shall be sent out immediately after ETH bus is up.</br></li><li>8.1.58.1.0-7 Output data: Gratuitous ARP frame, ETH frame with priority, MAC validation, Link up or down</br></li><li>8.1.58.1.0-8 Postconditions: NA</br></li><li>8.1.58.1.0-9 Descriptions of exceptions: NA</br></li><li>8.1.58.1.0-10 Dependencies and interactions: BMW Application, PANA Application and MGU</br></li><li>8.1.58.2 Differences to CRS</br></li><li>8.1.58.2.0-1 Waiting for CR to approve and update to be provided in KLH</br></li><li>8.1.58.3 Questions and Answers</br></li><li>8.1.58.3.0-1 NA</br></li>