<a href='D:\Code_Projects\RequirementAnalyzer\RequirementAnalyzer.App\Output\Index.html'>Home</a><h1>SYR_SUP_220</h1></br><li>7.4.2.23 SYR_SUP_220: Cross Variant Flashing Detection/Prevention in Btld</br></li><li>7.4.2.23.1 Description</br></li><li>7.4.2.23.1.0-1 Brief description: CCU shall not allow cross carline variant flashing while in EcuMode: FieldMode.</br></li><li>7.4.2.23.1.0-2 Preconditions: 
1. Ecu in FieldMode.
2. Carline variant has been assigned by BMW by flashing the corresponding SWFL/SWFK while unit was in PlantMode.</br></li><li>7.4.2.23.1.0-3 Trigger: The RID: (CheckMemory - Indicated) – 0x31 01 02 02 12 in SoftwareDownload sequence.</br></li><li>7.4.2.23.1.0-4 Input data: SWFL/SWFK files, the SGBD data contained in it shall be the reference for carline, as the Hauptversion in the SGBD shall be the carline indicator.
  </br></li><li>7.4.2.23.1.0-5 Description of behaviour:
#	Description	Type
1	Restrictions	Header
1.1	The Btld SWC shall be identical and shall have the same SGBM Data across all SP18.2 and I-20 variants.	Requirement
1.2	DSP and PIC SWCs shall be identical and shall have the same SGBM Data across all SP18.2 and I-20 variants.	Requirement
1.3	The SGBM Version Byte: "HV" number shall be used to distinguish between the carlines for the SWFL and SWFK.	info
1.4	The SGBM Version Byte: "HV" shall be unique per carline and shall retain it's value through development, else, a SW update break will occur.	Requirement
2	EcuModes	Header
2.1	The Appl SWC shall store the current EcuMode in the HSM Dflash.	Requirement
2.2	The Appl SWC shall store the EcuMode in the following checkpoints:
1.Write Plant Mode RID (Panasonic Supplier Cmd run in Pana Plant).
2. DID: STEUERN_SWITCH_TO_FALLBACK_FIELD_MODE  0x31 0x01 0x1100
3. Verification of Transition Tokens for PlantMode + EngineeringMode	Requirement
3	Plant/Engineering Modes	Header
3.1	The btld SWC shall read the EcuMode stored by Appl SWC from HSM Dflash for following evauations.	Requirement
3.2	While in Plant/EngineeringMode: the Btld SWC shall exceptionally allow cross variant flashing.	Requirement
3.3	While in Plant/EngineeringMode: the Btld SWC shall exceptionally allow Security Rollback.	Requirement
3.4	While in Plant/EngineeringMode: The btld SWC shall update the flashed SWFL/SWFK Carline version ("HV" byte) in HSM Dflash with each successful flashing cycle.	Requirement
4	Field Mode	Header
4.1	While in Field Mode: In the end of a Flashing cycle, before writing the validity flag: The Btld SWC shall compare the newly flashed SWFL/SWFK "HV" byte to the versions stored in the HSM Dflash:
1. If matching: This flashing step shall proceed successfully.
2. If mismatches: The flashing cycle shall fail, with the validity flag set as invalid.	Requirement
4.2	The Btld shall indicate the mismatched version in the response of the DSC: RoutineControl (CheckMemory - Indicated) – 0x31 01 02 02 12	Requirement
4.3	SW shall allow the switching from I20 to G70 SW. HV=59.	Requirement
4.4	SW shall allow the switching from G26 to future line: HV=69.	Requirement
4.5	Sw shall follow below cross varient transisition table
 
Legend:
Red is preexisting implementation from older EPIC.
Green is added whitelisting.
Yellow is rollback prevention.
Grey is normal case of self-flashing.
	Requirement

  </br></li><li>7.4.2.23.1.0-6 Timing Requirements:None.</br></li><li>7.4.2.23.1.0-7 Output data: 
In case of failure: CCU shall indicate the failure in the +ve resp of the RID: CheckMemory - Indicated.
In case of success: Successful flashing procedure and confirmed validity flags.</br></li><li>7.4.2.23.1.0-8 Postconditions:
In case of failure: CCU shall be in bootmode.
In case of success: CCU shall be in Applmode.</br></li><li>7.4.2.23.1.0-9 Descriptions of exceptions:
CCU shall not excercise this behaviour when the EcuMode is PlantMode or EngineeringMode.</br></li><li>7.4.2.23.1.0-10 Dependencies and interactions:
Dependency on HSM v2.x and interaction is part of SwDownload sequence.</br></li><li>7.4.2.23.2 Differences to CRS</br></li><li>7.4.2.23.2.0-1 xxx</br></li><li>7.4.2.23.3 Questions and Answers</br></li><li>7.4.2.23.3.0-1 xxx</br></li>