<a href='D:\Code_Projects\RequirementAnalyzer\RequirementAnalyzer.App\Output\Index.html'>Home</a><h1>SYR_CCS_11</h1></br><li>1.1.31.15 SYR_CCS_11: providing support for charging session pause </br></li><li>1.1.31.15.1 Description</br></li><li>1.1.31.15.1.0-1 Brief description:
Charging session could be paused between CCU and Charging station. The pause will close the charging session with pause and datalink  with stored NMK,
Panasonic software shall receive trigger from BMW SWC to pause the charging V2G Session and later close the  Datalink.</br></li><li>1.1.31.15.1.0-2 Preconditions: V2G session and Data link established</br></li><li>1.1.31.15.1.0-3 Trigger: refer LH_CCS_ISO15118_AC_EIM_Sequence_Pause.pdf and LH_PLC_Pause_seq.pdf</br></li><li>1.1.31.15.1.0-4 Input data: NA</br></li><li>1.1.31.15.1.0-5 Description of behaviour:
V2G Session pause is a part of ISO15118 expectation. Under which Panasonic has to prepare platform to establish and re-establish charging session with Charging station.

Mainly speaking reason for charging pause can be requested locally in vehicle (CCU + WAVE/MGU) or it shall be requested mutually with Charging station. Entering in Pause will be common for both case. Pause session can be resumed by local trigger or external trigger.

 
Refer link for figure and below description:
https://asc.bmw.com/wiki/pages/viewpage.action?pageId=428944534

LOCAL Trigger ( Charging Pause timer expire in Vehicle)
- CCU enter in Charging Loop with Charging Profile request sleep for duration Tx = t2 - t1 (BMW SW shall create/monitor Charging profile information)

    > As per Charging Profile BMW_SW will request PANA SW (PANA_COMBO_Autosar_adaption : Vector SCC) trigger to Pause charging session. e.g BMW_st_ChaCcsISO = 1: Pause. It is expected that PANA SW shall store the current session ID in the NVM memory
    > Once the PANA SW provide notification of Session stop e.g. BMW_st_StMacCcsInt = 24: Scc_StateMachineStatus_StopCommunicationSession,
    > BMW SW(LIM_C) shall request to terminate link and keep NMK. e.g. BMW_st_RqrtAcvnComCcs = 3: Stop and keep NMK
    > PLCCP will provide notification to BMW SW (LIM_C) that PLC channel is matched with no LINK e.g. BMW_st_ActAvlComCcs = 1: PLC link matched and not joined
    > (info) BMW SW Shall set the Alarm for Time Tx with KOMBI (external CCU)
    > (info) BMW SW shall request to PANA SW (NM Management) to sleep CCU
    > (info) When Tx time is over, The is informed by KOMBI Shall wake up the Vehicle BUS (CANFD)
    > CCU shall be woken-up via CAN-FD wakeup line
    > CCU shall evaluate the NM Message received (expectation to receive Wakeup with Charging infrastructure needed)
    > PANA SW shall notify BMW SW (HVMP/LIM.C) to wakeup 
    > BMW SW (HVPM/LIM_C) shall evaluate the situation (possible to identify Alarm is Triggered, And charging session can be resumed wit Charging station)
    > BMW SW shall request Single B-C-B toggle over CP line to wakeup Charging station via LIM-HW e.g. BMW_st_ChaRdyPiw = false → true → false (as per ISO15118-3)
    > LIM-HW shall toggle voltage over CP Line (9V-6V-9V)
    > BMW SW(LIM_C) shall request for reestablishing old data link with PLCCP. e.g. BMW_st_RqrtAcvnComCcs = 2: Start with last NMK
    > PLCCP will inform BMW SW (LIM-C) Datalink status. e.g. 2: BMW_st_ActAvlComCcs = PLC link matched and joined
    > BMW SW(LIM_C) shall re-stablish session with old sessionID (from the NVM) to charging station

External Trigger (Charging station request to wakeup CCU)
- CP- Dutycyle change with same CP state B (0% → 3%, 100% → 97% and Current dutycyle to any change of +/- 3%) (verbal discussion with Christian Windmueller and Cay Kaben)

    - As per Charging Profile BMW_SW will request PANA SW (PANA_COMBO_Autosar_adaption : Vector SCC) trigger to Pause charging session. e.g BMW_st_ChaCcsISO = 1: Pause
    - Once the PANA SW provide notification of Session stop e.g. BMW_st_StMacCcsInt = 24: Scc_StateMachineStatus_StopCommunicationSession,
    - BMW SW(LIM_C) shall request to terminate link and keep NMK. e.g. BMW_st_RqrtAcvnComCcs = 3: Stop and keep NMK
    - PLCCP will provide notification to BMW SW (LIM_C) that PLC channel is matched with no LINK e.g. BMW_st_ActAvlComCcs = 1: PLC link matched and not joined
    - BMW SW Shall set the Alarm for Time Tx with KOMBI (external CCU)
    - BMW SW shall request to PANA SW (NM Management) to sleep CCU
    - PANA SW detect change in the dutycycle by +/- 3%, Wakeup up the CCU and vehicle BUS (CANFD) with Charging infrastructure request
    - PANA SW shall inform BMW SW (HVPM)
    - BMW SW (HVPM/LIM_C) shall evalute the situation and request for resuming old session with Charging station
    - BMW SW(LIM_C) shall request for reestablishing old data link with PLCCP. e.g. BMW_st_RqrtAcvnComCcs = 2: Start with last NMK
    - PLCCP will inform BMW SW (LIM-C) Datalink status. e.g. 2: BMW_st_ActAvlComCcs = PLC link matched and joined
    - BMW SW(LIM_C) shall re-stablish session with old sessionID to charging station

ISO15118-3 Expectation in visual inline to above discussion 
https://asc.bmw.com/wiki/pages/viewpage.action?pageId=428944534

Refined Sequence for Charge Pause with CCU and Charging Station
https://svn-bmw03-pais.eu.panasonic.com/BMW03_CCU_DOC/Common/WorkSpace/ENG.02_SystemRequirementsAnalysis/ENG.02_SystemRequirementSpecification/AdditionalDocuments/Charging_Interface/CCS/Sequence/LH_CCS_ISO15118_AC_EIM_Sequence_Pause.pdf

https://svn-bmw03-pais.eu.panasonic.com/BMW03_CCU_DOC/Common/WorkSpace/ENG.02_SystemRequirementsAnalysis/ENG.02_SystemRequirementSpecification/AdditionalDocuments/Charging_Interface/CCS/Sequence/LH_PLC_Pause_seq.pdf
</br></li><li>1.1.31.15.1.0-6 Timing Requirements: overall timing specification requested in ISO1518 -3 and -2 shall be maintained.</br></li><li>1.1.31.15.1.0-7 Output data: refer LH_CCS_ISO15118_AC_EIM_Sequence_Pause.pdf and LH_PLC_Pause_seq.pdf</br></li><li>1.1.31.15.1.0-8 Postconditions: enter and exit V2G session</br></li><li>1.1.31.15.1.0-9 Descriptions of exceptions: NA</br></li><li>1.1.31.15.1.0-10 Dependencies and interactions: BMW SWC</br></li><li>1.1.31.15.2 Differences to CRS</br></li><li>1.1.31.15.2.0-1 NA</br></li><li>1.1.31.15.3 Questions and Answers</br></li><li>1.1.31.15.3.0-1 V2G Session:
https://svn-bmw03-pais.eu.panasonic.com/BMW03_CCU_DOC/Common/WorkSpace/ENG.02_SystemRequirementsAnalysis/ENG.02_SystemRequirementSpecification/AdditionalDocuments/Charging_Interface/CCS/Sequence/LH_CCS_ISO15118_AC_EIM_Sequence_Pause.pdf
PLC interface pause:
https://svn-bmw03-pais.eu.panasonic.com/BMW03_CCU_DOC/Common/WorkSpace/ENG.02_SystemRequirementsAnalysis/ENG.02_SystemRequirementSpecification/AdditionalDocuments/Charging_Interface/CCS/Sequence
Refer 8.4.2 Session Handling  in ISO15118-2 for more details.
Refer 7.6 Sleep mode and wake-up in ISO15118-3 for more details.</br></li>