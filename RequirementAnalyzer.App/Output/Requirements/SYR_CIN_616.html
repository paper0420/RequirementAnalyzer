<a href='D:\Code_Projects\RequirementAnalyzer\RequirementAnalyzer.App\Output\Index.html'>Home</a><h1>SYR_CIN_616</h1></br><li>8.1.71 SYR_CIN_616: Adaptation to CCU ILD state machine, ILD DTCs and SVK lesen for new AC China Inlet (AP2-B)</br></li><li>8.1.71.1 Description</br></li><li>8.1.71.1.0-1 Brief description: 
Charging socket HW is changing and due to which minimum functional scope of the charging socket for charging will be considered. Therefore, ILD for AC China will be developed w/o electronics (ex. no micro controller) and no private/ILD CAN.
With this change, CCU ILD state machine, SVK lesen and timeout DTCs are impacted and should be adapted accordingly. </br></li><li>8.1.71.1.0-2 Preconditions:
AC China Inlet (AP2B) is present in Vehicle. Coding is done for AC-ILD (CAF is integrated). 
AC ILD is awake. </br></li><li>8.1.71.1.0-3 Trigger: when InletTypeAC_CCS is set to 1000</br></li><li>8.1.71.1.0-4 Input data: 
https://ccu-svn.microfuzzy.com/CCU_G26/SP21/SP21_SOP_2207/ENG.02_SystemRequirementsAnalysis/ENG.02_SystemRequirementSpecification/AdditionalDocuments/Charging_Interface/iLD/CCU-ILD_SM_AP2-B_AP2-C.pdf</br></li><li>8.1.71.1.0-5 Description of behaviour:

In current SWs (SOP 2207, 2211), charging socket (ILD) communicates with CCU over Private CAN.  
CCU has ILD state machine (controls the private CAN PDUs activation/deactivation, CCU sleep after Nachlauf etc..), timeout DTCs for private CAN PDUs, DTCs for Charging socket (ILD HW/SW) inconsistency and ILD SVK Lesen.
***

Now since Charging socket HW is changing and minimum functional scope of the charging socket for charging should be  considered. New ILD socket for AC China (AP2-B) socket will be developed w/o electronics (microcontroller) and w/o ILD CAN.

To detect this new ILD, vehcile inlet coding type parameter is updated with new value. Therefore, if InletTypeAC_CCS coding parameter is set to 1000, then vehicle is expected to have AC China Inlet (AP2B).
***

When InletTypeAC_CCS is 1000,
1. CCU should deactivate only RX AC_CCS private CAN PDUs (PDU group ILD_AC_CCS). No reception of PDUs from AC_CCS ILD is expected.

Info: To keep the change minimum in SW, AC_CCS TX PDUs are not deactivated and even if they are sent on private CAN to AC ILD,PDUs will be ignored.
 
2. CCU should deactivate only timeout DTCs for AC_CCS ILD on private CAN. 
0xD797C3 - Botschaft (EAPC_Status_Ladedose_AC_CCS, ID: EAPC_Status_Ladedose_AC_CCS) fehlt
0xD79763 - Botschaft (EAPC_Status_Ladestatusanzeige_AC_CCS, ID: EAPC_Status_Ladestatusanzeige_AC_CCS) fehlt
0xD79769 - Botschaft (EAPC_Status_Ladesteckerverriegelung_AC_CCS, ID: EAPC_Status_Ladesteckerverriegelung_AC_CCS) fehlt
0xD7975D - Botschaft (EAPC_Status_Ladeklappe_AC_CCS, ID: EAPC_Status_Ladeklappe_AC_CCS) fehlt
0xD7976C - Botschaft (EAPC_Temperatur AC, ID: EAPC_Temperatur_AC) fehlt
0xD79811 - Botschaft (EAPC_Status_Ladeklappe_Roh_AC_CCS, ID: EAPC_Status_Ladeklappe_Roh_AC_CCS) fehlt
0xD797DB - Botschaft (EAPC_Status_Ladesteckerverriegelung_Roh_AC_CCS, ID: EAPC_St_Ladesteckerverriegelung_Roh_AC_CCS) fehlt

Important Note: DC ILD remains active as it is for China variants. DC ILD is also placed in Car with AC ILD. DC ILD related functionalities shall not be impacted.  

3. CCU should deactivate the DTCs for detecting the wrong ILDs connected. DTC were implemented in CCU SW with EPIC CCU-19493 and CCU-19494.
Now these DTCs should be deactivated for new AC China ILD (charging inlet) as CCU would not perform mismatch check for (SW/HW) version for this ILD but only remain active for DC-ILD (i.e. DC-GBT, Chademo, Chaoji etc.).
	0x0321A9 - Ladedose: Hardware inconsistent
	0x0321AA - Ladedose: Software inkonsistent

4. Since AC China ILD does not have private CAN channel. Read SVK from Master (CCU) for AC China CIF is not expected to be sent since there will be no entry in CCU for AC China ILD (DLOG entry).  
Byte 0	Client ID	AC/CCS CIF or DC CIF
Byte 1	UDS Service ID	ReadDataByIdentifier
Byte 2	DID (Byte 1)	SVK_MSB
Byte 3	DID (Byte 2)	SVK_LSB

The positive DID response is only expected for targeted CIF (which means presence of DC ILD). The response mainly contains SGBM-ID, Hauptversion, Unterversion and Patchversion. 
After getting all the SVK's from CIF, CCU has to assemble it with SVK information of CCU and store to send it to the tester. Therefore, in this assembled response to tester, no information related to new AC China ILD is expected to be present. 
For Read SVK, refer Req ID : FL845 and FL846 in LH 10505691 – 000 – 02.

***

CCU sleep procedure is having no change. Since ILD state machine in CCU is active for DC ILD, CCU enters into "ILD Shutdown" state of CCU's ILD statemachine and then after 4 sec of Nachlauf transmission on private CAN, CCU enters Sleep by calling BswM enter shutdown rule.
Refer:
https://ccu-svn.microfuzzy.com/CCU_G26/SP21/SP21_SOP_2207/ENG.02_SystemRequirementsAnalysis/ENG.02_SystemRequirementSpecification/AdditionalDocuments/Charging_Interface/iLD/CCU-ILD_SM_AP2-B_AP2-C.pdf

Wakeup of CCU via new AC China ILD is not possible anymore. However, CCU wakeup via Proximity or Pilot is still possible.  Wakeup and Sleep of AC China ILD is not in scope of this SYR.  </br></li><li>8.1.71.1.0-6 Timing Requirements: NA</br></li><li>8.1.71.1.0-7 Output data: Private CAN should have DC-ILD PDUs active.
Also, possible to have AC CCS PDUs (only TX) but no impact is derived.
Read SVK should be present w/O AC China ILD entries.
Timeout DTCs and ILD in-consitence DTCs shall not be present.</br></li><li>8.1.71.1.0-8 Postconditions:  NA</br></li><li>8.1.71.1.0-9 Descriptions of exceptions: NA</br></li><li>8.1.71.1.0-10 Dependencies and interactions:
BswM, SVK adapter, RTE</br></li><li>8.1.71.2 Differences to CRS</br></li><li>8.1.71.2.0-1 xxx</br></li><li>8.1.71.3 Questions and Answers</br></li><li>8.1.71.3.0-1 xxx</br></li>